[env:m5station-485]
platform = espressif32
board = m5station-485
framework = arduino
monitor_speed = 115200
# Use monitor_filters (comma-separated) instead of monitor_flags entries
monitor_filters = esp32_exception_decoder, time

; Optimize for timing-critical applications
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_FREERTOS_HZ=1000
    -DCONFIG_ESP32_DEFAULT_CPU_FREQ_240=1
    -O2

; Libraries for M5Stack and RS485 communication
lib_deps = 
    m5stack/M5Stack@^0.4.6
    
; Upload settings
upload_speed = 921600
upload_port = AUTO

; Monitor settings for debugging
monitor_port = AUTO

[env:debug]
extends = env:m5station-485
build_type = debug
build_flags = 
    ${env:m5station-485.build_flags}
    -DDEBUG_CRESTRON=1
    -DDEBUG_RS485=1